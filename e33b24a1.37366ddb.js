(window.webpackJsonp=window.webpackJsonp||[]).push([[133,137],{141:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return m}));var i=n(1),a=n(9),o=(n(0),n(296)),r={},c={id:"workflow/snippets/prereqs-mobile",title:"prereqs-mobile",description:":::important",source:"@site/docs/workflow/snippets/prereqs-mobile.mdx",permalink:"/docs/workflow/snippets/prereqs-mobile",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/workflow/snippets/prereqs-mobile.mdx"},l=[],s={rightToc:l};function m(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(i.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(o.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Extending Geocortex Workflow for Mobile requires development and deployment of a custom Geocortex Mobile Application using the ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/mobile/sdk-overview"}),"Geocortex Mobile SDK")))),Object(o.b)("p",null,"Follow the instructions in the ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/workflow/sdk-mobile-overview"}),"Geocortex Mobile SDK")," page to set up the environment for extending Workflow for Geocortex Mobile."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"A working knowledge of ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://dotnet.microsoft.com/"}),"C# and the .NET platform")," is recommended before extending Workflow for Geocortex Mobile"))))}m.isMDXComponent=!0},281:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return u})),n.d(t,"metadata",(function(){return d})),n.d(t,"rightToc",(function(){return v})),n.d(t,"default",(function(){return w}));var i,a=n(1),o=n(9),r=(n(0),n(296)),c=n(141),l=n(301),s=n(304),m=n(303),b=n(299),p=n(300),u={title:"Create an Activity",description:"Geocortex Workflow - Create a workflow activity for web applications"},d={id:"workflow/sdk-mobile-create-activity",title:"Create an Activity",description:"Geocortex Workflow - Create a workflow activity for web applications",source:"@site/docs/workflow/sdk-mobile-create-activity.mdx",permalink:"/docs/workflow/sdk-mobile-create-activity",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/workflow/sdk-mobile-create-activity.mdx",sidebar:"workflow",previous:{title:"Using the .NET Workflow SDK with Geocortex Mobile",permalink:"/docs/workflow/sdk-mobile-overview"},next:{title:"Workflow Activity Reference",permalink:"/docs/workflow/sdk-mobile-activity-reference"}},v=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Create the Activity",id:"create-the-activity",children:[]},{value:"Register the Activity with the <code>IActivityHandlerFactory</code>",id:"register-the-activity-with-the-iactivityhandlerfactory",children:[]},{value:"Use the Activity in a Workflow",id:"use-the-activity-in-a-workflow",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],f=(i="WorkflowUrlSnippet",function(e){return console.warn("Component "+i+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",e)}),h={rightToc:v};function w(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},h,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This article will walk you through creating a new workflow activity for Geocortex Mobile applications."),Object(r.b)("img",{src:Object(l.a)("img/workflow-mobile-create-activity.png")}),Object(r.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(r.b)(c.default,{mdxType:"MobilePrereqs"}),Object(r.b)("h2",{id:"create-the-activity"},"Create the Activity"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Create a new file ",Object(r.b)("inlineCode",{parentName:"li"},"CustomActivity.cs")," in the platform agnostic project of the Geocortex Mobile ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/mobile/sdk-overview"}),"Quickstart"),"."),Object(r.b)("li",{parentName:"ol"},"Add a new skeleton workflow activity that implements ",Object(r.b)("inlineCode",{parentName:"li"},"IActivityHandler"),".")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs",metastring:'title="App1/App1/CustomActivity.cs"',title:'"App1/App1/CustomActivity.cs"'}),'using App1.Workflow;\nusing Geocortex.Mobile.Composition;\nusing Geocortex.Workflow.Runtime;\nusing System.Collections.Generic;\nusing System.Threading.Tasks;\n\n[assembly: Export(typeof(CustomActivity))]\nnamespace App1.Workflow\n{\n    public class CustomActivity : IActivityHandler\n    {\n        public static string Action { get; } = "your:unique:namespace::CustomActivity";\n\n        public Task<IDictionary<string, object>> Execute(IDictionary<string, object> inputs, IActivityContext context)\n        {\n            return Task.FromResult((IDictionary<string, object>)new Dictionary<string, object>(){\n                ["test"] = "value"\n            });\n        }\n    }\n}\n')),Object(r.b)("h2",{id:"register-the-activity-with-the-iactivityhandlerfactory"},"Register the Activity with the ",Object(r.b)("inlineCode",{parentName:"h2"},"IActivityHandlerFactory")),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Create a new file, ",Object(r.b)("inlineCode",{parentName:"li"},"ActivityLoader.cs")," in the platform agnostic project of the Geocortex Mobile ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/mobile/sdk-overview"}),"Quickstart"),"."),Object(r.b)("li",{parentName:"ol"},"Implement the ",Object(r.b)("inlineCode",{parentName:"li"},"IActivityHandlerFactory")," interface and register the activity skeleton we created in the constructor.")),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs",metastring:'title="App1/App1/ActivityLoader.cs"',title:'"App1/App1/ActivityLoader.cs"'}),'using System;\nusing System.Collections.Generic;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing Geocortex.Mobile.Composition;\nusing Geocortex.Workflow.Runtime;\nusing Geocortex.Workflow.Runtime.Definition;\nusing Geocortex.Workflow.Runtime.Execution;\nusing App1.Workflow;\n\n[assembly: Export(typeof(ActivityLoader), SingleInstance = true, AsImplementedInterfaces = true)]\nnamespace App1.Workflow\n{\n    public class ActivityLoader : IActivityHandlerFactory\n    {\n        /// <summary>\n        /// Gets a mapping of action names to implementations of <see cref="IActivityHandler"/>s.\n        /// </summary>\n        private Dictionary<string, Func<IActivityHandler>> RegisteredActivities { get; } = new Dictionary<string, Func<IActivityHandler>>();\n\n        public ActivityLoader(Func<CustomActivity> customActivityFactory)\n        {\n            // highlight-next-line\n            RegisteredActivities[CustomActivity.Action] = customActivityFactory;\n        }\n\n        /// <summary>\n        /// Creates an <see cref="IActivityHandler"/>.\n        /// </summary>\n        /// <param name="action">The name of the action to create.</param>\n        /// <param name="token">The cancellation token.</param>\n        /// <param name="inspector">The <see cref="ProgramInspector"/> for the program.</param>\n        /// <returns>The activity handler for the given action.</returns>\n        public Task<IActivityHandler> Create(string action, CancellationToken token, ProgramInspector inspector = null)\n        {\n            if (action == null || token.IsCancellationRequested)\n            {\n                return Task.FromResult<IActivityHandler>(null);\n            }\n\n            if (RegisteredActivities.TryGetValue(action, out Func<IActivityHandler> handlerType))\n            {\n                return Task.FromResult(handlerType());\n            }\n            else\n            {\n                return Task.FromResult<IActivityHandler>(null);\n            }\n        }\n    }\n}\n')),Object(r.b)("h2",{id:"use-the-activity-in-a-workflow"},"Use the Activity in a Workflow"),Object(r.b)("p",null,"Workflows that run in your custom Geocortex Mobile application can now run this custom activity."),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/workflow/sdk-net-register-activities"}),"Registering stubs for .NET activities")," provides a user friendly interface for your custom activities in Geocortex Workflow Designer."))),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.geocortex.com/workflow/latest/help/Default.htm#wf5/help/activities/run-activity.htm%3FTocPath%3DActivities%7CActivity%2520Reference%7C_____167"}),Object(r.b)("inlineCode",{parentName:"a"},"RunActivity"))," activity can be used to execute your activity by the name defined in ",Object(r.b)("inlineCode",{parentName:"p"},"CustomActivity.cs")," (for this example, ",Object(r.b)("inlineCode",{parentName:"p"},"your:unique:namespace::CustomActivity"),")."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",null,"You can"," ",Object(r.b)("a",{href:Object(l.a)("workflows/mobile-create-activity.json"),download:"custom-activity-workflow.json"},"download this demo workflow")," ","that runs the custom activity and",Object(r.b)("a",{href:"https://docs.geocortex.com/workflow/latest/help/Default.htm#wf5/help/import-export-workflows.htm",target:"_blank"}," ","import it into the Geocortex Workflow Designer."," ")))),Object(r.b)("p",null,"Next you need to run the workflow you just created in your Geocortex Mobile SDK project."),Object(r.b)("p",null,"You can do this by configuring the layout and app config to run a workflow. You will need to copy the ID of the the workflow you created into the app.json"),Object(r.b)(f,{mdxType:"WorkflowUrlSnippet"}),Object(r.b)(s.a,{defaultValue:"config",values:[{label:"App Config",value:"config"},{label:"Layout",value:"layout"},{label:"UI",value:"ui"}],mdxType:"Tabs"},Object(r.b)(m.a,{value:"config",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json",metastring:'title="App1/App1/app.json"',title:'"App1/App1/app.json"'}),'{\n    "schemaVersion": "1.0",\n    "items": [\n        {\n            "$type": "layout",\n            "id": "desktop-layout",\n            "url": "resource://layout-large.xml",\n            "tags": ["large"]\n        },\n        {\n            "$type": "workflow",\n            "id": "custom-workflow",\n            "title": "Custom Workflow",\n            "target": "#taskbar",\n            // highlight-next-line\n            "portalItem": "<your-workflow-id>"\n        },\n        {\n            "$type": "menu",\n            "id": "iwtm",\n            "items": [\n                {\n                    "title": "Run Custom Workflow",\n                    "isEnabled": true,\n                    "iconId": "workflow",\n                    "action": {\n                        "name": "workflow.run",\n                        "arguments": {\n                            "id": "custom-workflow"\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n}\n'))),Object(r.b)(m.a,{value:"layout",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml",metastring:'title="App1/App1/layout-large.xml"',title:'"App1/App1/layout-large.xml"'}),'<?xml version="1.0" encoding="utf-8" ?>\n<layout\n    xmlns="https://geocortex.com/layout/v1"\n    xmlns:gxm="https://geocortex.com/layout/mobile/v1"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="https://geocortex.com/layout/v1 ../../ViewerFramework/layout/layout-mobile.xsd">\n    <gxm:taskbar id="taskbar" orientation="vertical">\n        <map slot="main">\n            <stack margin="0.8" slot="top-right" halign="end">\n                <iwtm config="iwtm"/>\n            </stack>\n        </map>\n    </gxm:taskbar>\n</layout>\n'))),Object(r.b)(m.a,{value:"ui",mdxType:"TabItem"},Object(r.b)("img",{src:Object(l.a)("img/workflow-mobile-create-activity.png")}))),Object(r.b)("h2",{id:"next-steps"},"Next Steps"),Object(r.b)(b.a,{mdxType:"UseCaseContainer"},Object(r.b)(p.a,{title:"Calculate a Logarithm with a Custom Activity",description:"Implement a custom activity that calculates the logarithm of a number",link:"tutorial-mobile-calculate-logarithm-activity",mdxType:"UseCaseCard"}),Object(r.b)(p.a,{title:"Implement a Custom Form Element",description:"Implement a custom form element for applications like Geocortex Mobile",link:"tutorial-mobile-activity-indicator-form-element",mdxType:"UseCaseCard"}),Object(r.b)(p.a,{title:"Add a Callout to the Map through a Custom Activity",description:"Access the map in custom activities for Geocortex Mobile",link:"tutorial-mobile-show-map-callout",mdxType:"UseCaseCard"}),Object(r.b)(p.a,{title:"Use the ArcGIS Runtime SDK for .NET in an activity.",description:"Use the ArcGIS Runtime SDK for .NET in an activity or form element",link:"sdk-net-integrating-the-arcgis-api",mdxType:"UseCaseCard"})))}w.isMDXComponent=!0},298:function(e,t,n){"use strict";var i=n(0),a=n(51);t.a=function(){return Object(i.useContext)(a.a)}},299:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(0),a=n.n(i),o=n(297),r=n.n(o),c=n(130),l=n.n(c);function s(e){var t=e.children;return a.a.createElement("div",{className:r()(l.a.root)},t)}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(306);var i=n(305),a=n(0),o=n.n(a),r=n(297),c=n.n(r),l=n(131),s=n.n(l);function m(e){var t=e.title,n=e.description,a=e.link;return o.a.createElement("div",{className:c()("card-demo",s.a.root)},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card__header"},o.a.createElement("h3",null,t)),o.a.createElement("div",{className:"card__body"},o.a.createElement("p",null,n)),o.a.createElement("div",{className:"card__footer"},o.a.createElement(i.a,{className:"button button--secondary button--block",to:a},"Get Started"))))}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(307);var i=n(298);function a(e){var t=(Object(i.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},302:function(e,t,n){"use strict";var i=n(0),a=Object(i.createContext)({tabGroupChoices:{},setTabGroupChoices:function(){}});t.a=a},303:function(e,t,n){"use strict";var i=n(0),a=n.n(i);t.a=function(e){return a.a.createElement("div",null,e.children)}},304:function(e,t,n){"use strict";n(26),n(21),n(22);var i=n(0),a=n.n(i),o=n(302);var r=function(){return Object(i.useContext)(o.a)},c=n(297),l=n.n(c),s=n(132),m=n.n(s),b=37,p=39;t.a=function(e){var t=e.block,n=e.children,o=e.defaultValue,c=e.values,s=e.groupId,u=r(),d=u.tabGroupChoices,v=u.setTabGroupChoices,f=Object(i.useState)(o),h=f[0],w=f[1];if(null!=s){var y=d[s];null!=y&&y!==h&&w(y)}var g=function(e){w(e),null!=s&&v(s,e)},j=[];return a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:l()("tabs",{"tabs--block":t})},c.map((function(e){var t=e.value,n=e.label;return a.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":h===t,className:l()("tab-item",m.a.tabItem,{"tab-item--active":h===t}),key:t,ref:function(e){return j.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case p:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case b:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(j,e.target,e)},onFocus:function(){return g(t)},onClick:function(){return g(t)}},n)}))),a.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},i.Children.toArray(n).filter((function(e){return e.props.value===h}))[0]))}}}]);