(window.webpackJsonp=window.webpackJsonp||[]).push([[49,145],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return m})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return h}));var o=n(2),a=(n(0),n(231)),r=n(232),c=n(238),i=n(237),s=n(241),l=n(242),p=n(49);const m={title:"Import the MapModel into a Component",description:"Geocortex Web - Learn how to interact with the map in a custom component"},u={unversionedId:"web/tutorial-import-map-model",id:"web/tutorial-import-map-model",isDocsHomePage:!1,title:"Import the MapModel into a Component",description:"Geocortex Web - Learn how to interact with the map in a custom component",source:"@site/docs/web/tutorial-import-map-model.mdx",slug:"/web/tutorial-import-map-model",permalink:"/docs/web/tutorial-import-map-model",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/web/tutorial-import-map-model.mdx",version:"current",sidebar:"web",previous:{title:"Build a Custom Component with UI",permalink:"/docs/web/tutorial-implement-component-with-ui"},next:{title:"Pull Component Data from App Config",permalink:"/docs/web/tutorial-implement-component-participate-app-config"}},d=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Create a Custom Component With a Model",id:"create-a-custom-component-with-a-model",children:[]},{value:"Inject the Map Model into the Component",id:"inject-the-map-model-into-the-component",children:[]},{value:"Use the Map Model to Add a New Graphics Layer",id:"use-the-map-model-to-add-a-new-graphics-layer",children:[]},{value:"Live Sample",id:"live-sample",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],b={rightToc:d};function h({components:e,...t}){return Object(a.b)("wrapper",Object(o.a)({},b,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Custom components can already interface with much of the functionality in Geocortex Web through commands and operations. However, sometimes more direct access to the data structures that power components is needed."),Object(a.b)("p",null,"This article will teach you how to inject the Map model into a custom component so you can directly access the Esri Map object and add a graphics layer to it."),Object(a.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(a.b)(p.default,{mdxType:"PrereqsCustomCodeSnippet"}),Object(a.b)("h2",{id:"create-a-custom-component-with-a-model"},"Create a Custom Component With a Model"),Object(a.b)("p",null,"First, we will create a custom component that has an associated model."),Object(a.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(a.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(o.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(o.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(o.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(a.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"To learn more about registering and using a component in the layout, check out ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/web/sdk-components-reference"}),"the component reference")))),Object(a.b)(s.a,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"},{label:"Layout",value:"layout"}],mdxType:"Tabs"},Object(a.b)(l.a,{value:"component",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/components/CustomComponent/CustomComponent.tsx"',title:'"src/components/CustomComponent/CustomComponent.tsx"'}),'import React from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport Button from "@vertigis/web/ui/Button";\nimport { CustomModel } from ".";\n\nexport default function CustomComponent(\n    props: LayoutElementProperties<CustomModel>\n) {\n    return (\n        <LayoutElement {...props}>\n            <Button onClick={() => props.model.addGraphic()}>\n                Add a Graphic to the Map\n            </Button>\n        </LayoutElement>\n    );\n}\n'))),Object(a.b)(l.a,{value:"model",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/components/CustomComponent/CustomModel.ts"',title:'"src/components/CustomComponent/CustomModel.ts"'}),'import { ComponentModelBase, serializable } from "@vertigis/web/models";\n\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    addGraphic() {\n        throw new Error("Not yet implemented.");\n    }\n}\n'))),Object(a.b)(l.a,{value:"layout",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'}),'<?xml version="1.0" encoding="utf-8" ?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="your.custom.namespace">\n    <map>\n        <custom:custom-component slot="top-center"/>\n    </map>\n</layout>\n')))),Object(a.b)("h2",{id:"inject-the-map-model-into-the-component"},"Inject the Map Model into the Component"),Object(a.b)("p",null,"Next, we can inject the Map model, which is the type ",Object(a.b)("inlineCode",{parentName:"p"},"MapExtension"),", into the component using the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/web/sdk-components-interactions#interacting-with-components-through-models"}),"model injection")," pattern."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),'\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    // highlight-start\n    @importModel("map-extension")\n    mapExtension: MapExtension | undefined;\n    // highlight-end\n    ...\n}\n')),Object(a.b)("h2",{id:"use-the-map-model-to-add-a-new-graphics-layer"},"Use the Map Model to Add a New Graphics Layer"),Object(a.b)("p",null,"Finally, we can use the ",Object(a.b)("inlineCode",{parentName:"p"},"MapExtension")," to add a custom graphics layer to the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html"}),"ArcGIS Map object"),"."),Object(a.b)(s.a,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"},{label:"UI",value:"ui"}],mdxType:"Tabs"},Object(a.b)(l.a,{value:"component",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/components/CustomComponent/CustomComponent.tsx"',title:'"src/components/CustomComponent/CustomComponent.tsx"'}),'import React from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport Button from "@vertigis/web/ui/Button";\nimport { CustomModel } from ".";\n\nexport default function CustomComponent(\n    props: LayoutElementProperties<CustomModel>\n) {\n    return (\n        <LayoutElement {...props}>\n            <Button onClick={() => props.model.addGraphic()}>\n                Add a Graphic to the Map\n            </Button>\n        </LayoutElement>\n    );\n}\n'))),Object(a.b)(l.a,{value:"model",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/components/CustomComponent/CustomModel.ts"',title:'"src/components/CustomComponent/CustomModel.ts"'}),'import {\n    ComponentModelBase,\n    serializable,\n    importModel,\n} from "@vertigis/web/models";\nimport { MapExtension } from "@vertigis/arcgis-extensions/mapping/MapExtension";\nimport Graphic from "esri/Graphic";\nimport GraphicsLayer from "esri/layers/GraphicsLayer";\nimport { Polygon } from "esri/geometry";\nimport { SimpleFillSymbol } from "esri/symbols";\n\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    @importModel("map-extension")\n    mapExtension: MapExtension | undefined;\n\n    // based on https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=intro-graphics\n    triangleGraphic = new GraphicsLayer({\n        graphics: [\n            new Graphic({\n                symbol: new SimpleFillSymbol({ color: "orange" }),\n                geometry: new Polygon({\n                    rings: [\n                        [\n                            [-64.78, 32.3],\n                            [-66.07, 18.45],\n                            [-80.21, 25.78],\n                            [-64.78, 32.3],\n                        ],\n                    ],\n                }),\n            }),\n        ],\n    });\n\n    addGraphic() {\n        if (this.mapExtension) {\n            const esriMap = this.mapExtension.map;\n            esriMap.add(this.triangleGraphic);\n        } else {\n            console.error(\n                "Could not add graphic to map, as no map model was imported into the \'CustomModel\'."\n            );\n        }\n    }\n}\n'))),Object(a.b)(l.a,{value:"ui",mdxType:"TabItem"},Object(a.b)("img",{src:Object(r.a)("img/web-add-graphics-layer-component.png")}))),Object(a.b)("h2",{id:"live-sample"},"Live Sample"),Object(a.b)("p",null,"Check out a ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://vertigis-web-samples.netlify.app/embedded-map"}),"live SDK sample")," that demonstrates injecting the map model into a component."),Object(a.b)("h2",{id:"next-steps"},"Next Steps"),Object(a.b)(i.a,{mdxType:"UseCaseContainer"},Object(a.b)(c.a,{title:"Learn more about Component Interactions",description:"Learn more about how components interact with each other through models and services",link:Object(r.a)("docs/web/sdk-components-interactions"),mdxType:"UseCaseCard"}),Object(a.b)(c.a,{title:"Learn how Components are Bound to Models in the Layout",description:"Learn how layout structure can be used to bind components to their required models",link:Object(r.a)("docs/web/configuration-advanced-model-binding"),mdxType:"UseCaseCard"})))}h.isMDXComponent=!0},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=o,b=m["".concat(c,".").concat(d)]||m[d]||u[d]||r;return n?a.a.createElement(b,i(i({ref:t},l),{},{components:n})):a.a.createElement(b,i({ref:t},l))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,c=new Array(r);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var l=2;l<r;l++)c[l]=n[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},232:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var o=n(235),a=n(233);function r(){const{siteConfig:{baseUrl:e="/",url:t}={}}=Object(o.a)();return{withBaseUrl:(n,o)=>function(e,t,n,{forcePrependBaseUrl:o=!1,absolute:r=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if(Object(a.b)(n))return n;if(o)return t+n;const c=n.startsWith(t)?n:t+n.replace(/^\//,"");return r?e+c:c}(t,e,n,o)}}function c(e,t={}){const{withBaseUrl:n}=r();return n(e,t)}},233:function(e,t,n){"use strict";function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!o(e)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}))},234:function(e,t,n){"use strict";function o(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(a&&(a+=" "),a+=t);return a}},235:function(e,t,n){"use strict";var o=n(0),a=n(19);t.a=function(){const e=Object(o.useContext)(a.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},236:function(e,t,n){"use strict";var o=n(0),a=n.n(o),r=n(13),c=n(233),i=n(8);const s=Object(o.createContext)({collectLink:()=>{}});var l=n(232),p=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};t.a=function(e){var t,{isNavLink:n,to:m,href:u,activeClassName:d,"data-noBrokenLinkCheck":b}=e,h=p(e,["isNavLink","to","href","activeClassName","data-noBrokenLinkCheck"]);const{withBaseUrl:f}=Object(l.b)(),v=Object(o.useContext)(s),O=m||u,j=Object(c.a)(O),y=null==O?void 0:O.replace("pathname://",""),g=void 0!==y?(e=>e.startsWith("/"))(w=y)?f(w):w:void 0;var w;const C=Object(o.useRef)(!1),x=n?r.e:r.c,M=i.a.canUseIntersectionObserver;let E;Object(o.useEffect)(()=>(!M&&j&&window.docusaurus.prefetch(g),()=>{M&&E&&E.disconnect()}),[g,M,j]);const N=null!==(t=null==g?void 0:g.startsWith("#"))&&void 0!==t&&t,k=!g||!j||N;return g&&j&&!N&&!b&&v.collectLink(g),k?a.a.createElement("a",Object.assign({href:g},!j&&{target:"_blank",rel:"noopener noreferrer"},h)):a.a.createElement(x,Object.assign({},h,{onMouseEnter:()=>{C.current||(window.docusaurus.preload(g),C.current=!0)},innerRef:e=>{var t,n;M&&e&&j&&(t=e,n=()=>{window.docusaurus.prefetch(g)},E=new window.IntersectionObserver(e=>{e.forEach(e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(E.unobserve(t),E.disconnect(),n())})}),E.observe(t))},to:g||""},n&&{activeClassName:d}))}},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),a=n.n(o),r=n(46),c=n.n(r);function i({children:e}){return a.a.createElement("div",{className:c.a.root},e)}},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(236),a=n(0),r=n.n(a),c=n(234),i=n(47),s=n.n(i);function l({title:e,description:t,link:n}){return r.a.createElement("div",{className:Object(c.a)("card-demo",s.a.root)},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__header"},r.a.createElement("h3",null,e)),r.a.createElement("div",{className:"card__body"},r.a.createElement("p",null,t)),r.a.createElement("div",{className:"card__footer"},r.a.createElement(o.a,{className:"button button--secondary button--block",to:n},"Get Started"))))}},239:function(e,t,n){"use strict";var o=n(0);const a=Object(o.createContext)(void 0);t.a=a},240:function(e,t,n){"use strict";var o=n(0),a=n(239);t.a=function(){const e=Object(o.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},241:function(e,t,n){"use strict";var o=n(0),a=n.n(o),r=n(240),c=n(234),i=n(48),s=n.n(i);const l=37,p=39;t.a=function(e){const{block:t,children:n,defaultValue:i,values:m,groupId:u}=e,{tabGroupChoices:d,setTabGroupChoices:b}=Object(r.a)(),[h,f]=Object(o.useState)(i),[v,O]=Object(o.useState)(!1);if(null!=u){const e=d[u];null!=e&&e!==h&&m.some(t=>t.value===e)&&f(e)}const j=e=>{f(e),null!=u&&b(u,e)},y=[],g=e=>{e.metaKey||e.altKey||e.ctrlKey||O(!0)},w=()=>{O(!1)};return Object(o.useEffect)(()=>{window.addEventListener("keydown",g),window.addEventListener("mousedown",w)},[]),a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":t})},m.map(({value:e,label:t})=>a.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":h===e,className:Object(c.a)("tabs__item",s.a.tabItem,{"tabs__item--active":h===e}),style:v?{}:{outline:"none"},key:e,ref:e=>y.push(e),onKeyDown:e=>{((e,t,n)=>{switch(n.keyCode){case p:((e,t)=>{const n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()})(e,t);break;case l:((e,t)=>{const n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()})(e,t)}})(y,e.target,e),g(e)},onFocus:()=>j(e),onClick:()=>{j(e),O(!1)},onPointerDown:()=>O(!1)},t))),a.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},o.Children.toArray(n).filter(e=>e.props.value===h)[0]))}},242:function(e,t,n){"use strict";var o=n(0),a=n.n(o);t.a=function(e){return a.a.createElement("div",null,e.children)}},49:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return l}));var o=n(2),a=(n(0),n(231));const r={},c={unversionedId:"web/snippets/prereqs-custom-code",id:"web/snippets/prereqs-custom-code",isDocsHomePage:!1,title:"prereqs-custom-code",description:"-   Download and setup the Geocortex Web SDK.",source:"@site/docs/web/snippets/prereqs-custom-code.mdx",slug:"/web/snippets/prereqs-custom-code",permalink:"/docs/web/snippets/prereqs-custom-code",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/web/snippets/prereqs-custom-code.mdx",version:"current"},i=[],s={rightToc:i};function l({components:e,...t}){return Object(a.b)("wrapper",Object(o.a)({},s,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Download and setup the ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/web/sdk-overview"}),"Geocortex Web SDK"),"."),Object(a.b)("li",{parentName:"ul"},"Check out the ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/web/sdk-deployment#uploading-custom-code-to-an-app"}),"deployment instructions")," to learn more about deploying custom code to a Geocortex Web App.")))}l.isMDXComponent=!0}}]);