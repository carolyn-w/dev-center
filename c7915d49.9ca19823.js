(window.webpackJsonp=window.webpackJsonp||[]).push([[120,136],{133:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return a})),n.d(t,"default",(function(){return d}));var i=n(1),r=n(9),s=(n(0),n(296)),o={},c={id:"web/snippets/prereqs-custom-code",title:"prereqs-custom-code",description:"-   Download and setup the [Geocortex Web SDK](../sdk-overview.mdx).",source:"@site/docs/web/snippets/prereqs-custom-code.mdx",permalink:"/docs/web/snippets/prereqs-custom-code",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/web/snippets/prereqs-custom-code.mdx"},a=[],u={rightToc:a};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(i.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Download and setup the ",Object(s.b)("a",Object(i.a)({parentName:"li"},{href:"/docs/web/sdk-overview"}),"Geocortex Web SDK"),"."),Object(s.b)("li",{parentName:"ul"},"Check out the ",Object(s.b)("a",Object(i.a)({parentName:"li"},{href:"/docs/web/sdk-deployment#uploading-custom-code-to-an-app"}),"deployment instructions")," to learn more about deploying custom code to a Geocortex Web App.")))}d.isMDXComponent=!0},271:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return a})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return b}));var i=n(1),r=n(9),s=(n(0),n(296)),o=n(133),c={title:"Subscribe to an Existing Event",description:"Geocortex Web - Learn how to create and subscribe to an existing Geocortex Web event"},a={id:"web/tutorial-events-subscribe",title:"Subscribe to an Existing Event",description:"Geocortex Web - Learn how to create and subscribe to an existing Geocortex Web event",source:"@site/docs/web/tutorial-events-subscribe.mdx",permalink:"/docs/web/tutorial-events-subscribe",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/web/tutorial-events-subscribe.mdx",sidebar:"web",previous:{title:"Pull Component Data from App Config",permalink:"/docs/web/tutorial-implement-component-participate-app-config"},next:{title:"Translate a Component's Text",permalink:"/docs/web/tutorial-internationalization"}},u=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Create the Custom Service",id:"create-the-custom-service",children:[]},{value:"Register the Custom Service",id:"register-the-custom-service",children:[]},{value:"Subscribe to the Event",id:"subscribe-to-the-event",children:[]}],d={rightToc:u};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(s.b)("wrapper",Object(i.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Events can only be created, published, and subscribed to from within a custom service, component model, or component. This article will walk you through subscribing to the ",Object(s.b)("inlineCode",{parentName:"p"},"ui.activated")," event from within a custom service."),Object(s.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(s.b)(o.default,{mdxType:"PrereqsCustomCodeSnippet"}),Object(s.b)("h2",{id:"create-the-custom-service"},"Create the Custom Service"),Object(s.b)("p",null,"Create a custom service with an ",Object(s.b)("inlineCode",{parentName:"p"},"_onInitialized")," and ",Object(s.b)("inlineCode",{parentName:"p"},"destroy")," method."),Object(s.b)("pre",null,Object(s.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/services/CustomService.ts"',title:'"src/services/CustomService.ts"'}),'import { ServiceBase } from "@geocortex/web/services";\n\nexport default class CustomService extends ServiceBase {\n    handles: IHandle[] = [];\n\n    protected async _onInitialize(): Promise<void> {\n        await super._onInitialize();\n    }\n\n    destroy(): void {}\n}\n')),Object(s.b)("h2",{id:"register-the-custom-service"},"Register the Custom Service"),Object(s.b)("p",null,"Register the custom service in ",Object(s.b)("inlineCode",{parentName:"p"},"src/index.ts")," and set it to load on startup."),Object(s.b)("pre",null,Object(s.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'}),'import { LibraryRegistry } from "@geocortex/web/config";\nimport CustomService from "./services/CustomService";\n\nexport default function (registry: LibraryRegistry) {\n    // highlight-start\n    registry.registerService({\n        id: "custom-service",\n        getServiceType: () => CustomService,\n        loadOnStartup: true,\n    });\n    // highlight-end\n}\n')),Object(s.b)("h2",{id:"subscribe-to-the-event"},"Subscribe to the Event"),Object(s.b)("p",null,"Subscribe to the ",Object(s.b)("inlineCode",{parentName:"p"},"ui.activated")," event."),Object(s.b)("pre",null,Object(s.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/services/CustomService.ts"',title:'"src/services/CustomService.ts"'}),"import { ServiceBase } from \"@geocortex/web/services\";\n\nexport default class CustomService extends ServiceBase {\n    handles: IHandle[] = [];\n\n    protected async _onInitialize(): Promise<void> {\n        await super._onInitialize();\n        this.handles.push(\n            this.messages.events.ui.activated.subscribe((id: string) => {\n                console.log(`Component '${id}' activated.`);\n            })\n        );\n    }\n\n    destroy(): void {\n        this.handles.forEach((handle) => handle.remove());\n    }\n}\n")))}b.isMDXComponent=!0}}]);