(window.webpackJsonp=window.webpackJsonp||[]).push([[108,125],{145:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var a=n(1),i=n(9),c=(n(0),n(296)),r={},o={id:"snippets/autofac-mobile",title:"autofac-mobile",description:":::note",source:"@site/docs/snippets/autofac-mobile.mdx",permalink:"/docs/snippets/autofac-mobile",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/snippets/autofac-mobile.mdx"},s=[],l={rightToc:s};function p(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Geocortex Mobile uses ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://autofaccn.readthedocs.io/en/latest/index.html"}),"Autofac")," to register, locate, and inject components, services and other classes. See ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/sdk-dependency-injection"}),"dependency injection")," for more info."))))}p.isMDXComponent=!0},258:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return m})),n.d(t,"metadata",(function(){return d})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return v}));var a=n(1),i=n(9),c=(n(0),n(296)),r=(n(301),n(300)),o=n(299),s=n(304),l=n(303),p=n(145),m={title:"Service Reference",description:"Geocortex Mobile - Service reference"},d={id:"mobile/sdk-services-reference",title:"Service Reference",description:"Geocortex Mobile - Service reference",source:"@site/docs/mobile/sdk-services-reference.mdx",permalink:"/docs/mobile/sdk-services-reference",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/mobile/sdk-services-reference.mdx",sidebar:"mobile",previous:{title:"Create a Service",permalink:"/docs/mobile/sdk-services-create"},next:{title:"Events Overview",permalink:"/docs/mobile/sdk-events-overview"}},b=[{value:"Service Registration",id:"service-registration",children:[]},{value:"Service Lifecycle",id:"service-lifecycle",children:[]},{value:"Initialization and Teardown",id:"initialization-and-teardown",children:[]},{value:"Dependency Injection",id:"dependency-injection",children:[]},{value:"Configuration Models",id:"configuration-models",children:[]},{value:"Relevant SDK Samples",id:"relevant-sdk-samples",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],u={rightToc:b};function v(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Services act as a repository of accessible behavior and data, and can be used for a variety of purposes, from implementing commands and operations, to managing shared data, to interfacing with the REST API of an external service."),Object(c.b)("h2",{id:"service-registration"},"Service Registration"),Object(c.b)("p",null,"All services need to be registered with Geocortex Mobile. A service is created by extending the ",Object(c.b)("inlineCode",{parentName:"p"},"ServiceBase")," class and registering the service class with Autofac through an assembly attribute."),Object(c.b)(p.default,{mdxType:"AutofacSnippet"}),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"// highlight-next-line\n[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    // highlight-next-line\n    class CustomService : ServiceBase\n    {\n        ...\n    }\n}\n")),Object(c.b)("h2",{id:"service-lifecycle"},"Service Lifecycle"),Object(c.b)("p",null,"On application load, all services that have been registered with wih Geocortex Mobile are first created and then initialized."),Object(c.b)("p",null,"Services are destroyed (i.e. the ",Object(c.b)("inlineCode",{parentName:"p"},"destroy")," method is invoked) when the application is destroyed, e.g. when killing the application or switching applications in Geocortex Go."),Object(c.b)("h2",{id:"initialization-and-teardown"},"Initialization and Teardown"),Object(c.b)("p",null,"Services have an initialization method, which can be used to perform asynchronous startup logic, and a teardown method, which can be used to free resources when the application is destroyed"),Object(c.b)("div",{className:"admonition admonition-important alert alert--info"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Always call ",Object(c.b)("inlineCode",{parentName:"p"},"base.Dispose(disposing)")," when overriding the ",Object(c.b)("inlineCode",{parentName:"p"},"Dispose")," method. ",Object(c.b)("inlineCode",{parentName:"p"},"ServiceBase")," already implements ",Object(c.b)("inlineCode",{parentName:"p"},"IDisposable")," and ",Object(c.b)("inlineCode",{parentName:"p"},"IDisposableTracker"),", so only override the ",Object(c.b)("inlineCode",{parentName:"p"},"Dispose")," method if you have created new managed resources which need to be cleaned up."))),Object(c.b)("p",null,"To learn more about memory management in Geocortex Mobile, check out ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/sdk-memory-leaks"}),"this article"),", and the ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Conceptual/Disposal"}),"relevant SDK sample"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private bool disposed = false;\n\n        public CustomService()\n            : base()\n        {\n            // On creation logic here\n\n        }\n        protected override async Task DoInitialize()\n        {\n            // Async on initialization logic here\n            return;\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposed)\n            {\n                return;\n            }\n\n            if (disposing)\n            {\n                // Clean up managed resources.\n                // ...\n            }\n\n            // Clean up unmanaged resources.\n            // ...\n\n            // highlight-next-line\n            base.Dispose(disposing);\n\n            disposed = true;\n        }\n\n\n    }\n}\n")),Object(c.b)("h2",{id:"dependency-injection"},"Dependency Injection"),Object(c.b)("p",null,"Services interact with the larger application by injecting their dependencies. Services can inject commands and operations, other services, and any other class registered with Autofac."),Object(c.b)("p",null,"The following example injects the UI operations and the dialog controller into a custom service."),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Services are not intended to directly interact with each other. Instead, services should ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/sdk-commands-operations#implementing-commands-and-operations"}),"implement operations")," which can be called by other services to indirectly interact."))),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private UIOperations _uiOperations;\n        private IDialogController _dialogController;\n\n        public CustomService(UIOperations uiOperations, IDialogController dialogController)\n            : base()\n        {\n            _uiOperations = uiOperations;\n            _dialogController = dialogController;\n        }\n        ...\n    }\n}\n")),Object(c.b)("h2",{id:"configuration-models"},"Configuration Models"),Object(c.b)("p",null,"Like components, services can be configured through the ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/configuration-app-config-getting-started"}),"app config"),". Services can participate in the app config by creating and injecting the appropriate ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/configuration-app-config-reference#app-items"}),Object(c.b)("strong",{parentName:"a"},"item type")),"."),Object(c.b)("p",null,"Each item type in the application is bound to a class ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/mobile/sdk-dependency-injection#appitem"}),"registered as an ",Object(c.b)("inlineCode",{parentName:"a"},"AppItem")," with autofac"),". This class instantiates itself with values from the app config in it's constructor, acting as a configuration model."),Object(c.b)("p",null,"A service can consume configuration by injecting the ",Object(c.b)("inlineCode",{parentName:"p"},"AppItem")," class as a dependency in it's constructor."),Object(c.b)(s.a,{defaultValue:"service",values:[{label:"Service Configuration Model",value:"model"},{label:"Service",value:"service"},{label:"App Config",value:"config"}],mdxType:"Tabs"},Object(c.b)(l.a,{value:"service",mdxType:"TabItem"},Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private IAppItem<CustomServiceSettings> _appItem;\n\n        public CustomService(IAppItem<CustomServiceSettings> appItem)\n            : base()\n        {\n            _appItem = appItem;\n        }\n        protected override async Task DoInitialize()\n        {\n            // highlight-start\n            var settings = await _appItem.ResolveAsync();\n            if (settings == null)\n            {\n                return;\n            }\n\n            Logger.Debug($\"Value of setting is '{settings.SomeSetting}'\");\n            return;\n            // highlight-end\n        }\n    }\n}\n"))),Object(c.b)(l.a,{value:"model",mdxType:"TabItem"},Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),'// highlight-next-line\n[assembly: AppItem(CustomServiceSettings.AppItemType, typeof(CustomServiceSettings))]\nnamespace App1.Services\n{\n    // highlight-next-line\n    [ServiceAppItem(AppItemType)]\n    public class CustomServiceSettings\n    {\n        // highlight-next-line\n        public const string AppItemType = "custom-service";\n\n        public string SomeSetting { get; set; }\n\n        public CustomServiceSettings()\n        {\n        }\n\n        public CustomServiceSettings(Properties properties)\n        {\n            // highlight-start\n            if (properties is null)\n            {\n                throw new System.ArgumentNullException(nameof(properties));\n            }\n\n            if (properties.TryGetValue("someSetting", out string someSetting))\n            {\n                SomeSetting = someSetting;\n            }\n            // highlight-end\n        }\n    }\n}\n'))),Object(c.b)(l.a,{value:"config",mdxType:"TabItem"},Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "schemaVersion": "1.0",\n\n    "items": [\n        ...{\n            "$type": "custom-service",\n            "id": "custom-service",\n            "someSetting": "Some Value"\n        }\n    ]\n}\n')))),Object(c.b)("h2",{id:"relevant-sdk-samples"},"Relevant SDK Samples"),Object(c.b)("p",null,"Check out the relevant Geocortex Mobile SDK Samples:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/Service"}),"Custom Service"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BasemapToggle"}),"Basemap Toggle that uses a Custom Service"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BreadCrumbs"}),"Breadcrumb Tracker that Uses a Custom Service")))),Object(c.b)("h2",{id:"next-steps"},"Next Steps"),Object(c.b)(o.a,{mdxType:"UseCaseContainer"},Object(c.b)(r.a,{title:"Learn how to use Commands and Operations with Services",description:"Learn how to run and implement commands and operations with custom services",link:"sdk-commands-operations",mdxType:"UseCaseCard"}),Object(c.b)(r.a,{title:"Learn about Service Interactions",description:"Learn about how services and components can interact",link:"sdk-component-service-interactions",mdxType:"UseCaseCard"}),Object(c.b)(r.a,{title:"Build a Custom Command with a Custom Service",description:"Follow a step by step guide to building a custom command with a custom service",link:"tutorial-implement-command-operation",mdxType:"UseCaseCard"}),Object(c.b)(r.a,{title:"Build a Service that Manages Dynamic Data",description:"Built a service that manages a dynamic data source and exposes it to components",link:"tutorial-implement-service-fetch-dynamic-data",mdxType:"UseCaseCard"})))}v.isMDXComponent=!0},298:function(e,t,n){"use strict";var a=n(0),i=n(51);t.a=function(){return Object(a.useContext)(i.a)}},299:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),i=n.n(a),c=n(297),r=n.n(c),o=n(130),s=n.n(o);function l(e){var t=e.children;return i.a.createElement("div",{className:r()(s.a.root)},t)}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(306);var a=n(305),i=n(0),c=n.n(i),r=n(297),o=n.n(r),s=n(131),l=n.n(s);function p(e){var t=e.title,n=e.description,i=e.link;return c.a.createElement("div",{className:o()("card-demo",l.a.root)},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card__header"},c.a.createElement("h3",null,t)),c.a.createElement("div",{className:"card__body"},c.a.createElement("p",null,n)),c.a.createElement("div",{className:"card__footer"},c.a.createElement(a.a,{className:"button button--secondary button--block",to:i},"Get Started"))))}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(307);var a=n(298);function i(e){var t=(Object(a.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},302:function(e,t,n){"use strict";var a=n(0),i=Object(a.createContext)({tabGroupChoices:{},setTabGroupChoices:function(){}});t.a=i},303:function(e,t,n){"use strict";var a=n(0),i=n.n(a);t.a=function(e){return i.a.createElement("div",null,e.children)}},304:function(e,t,n){"use strict";n(26),n(21),n(22);var a=n(0),i=n.n(a),c=n(302);var r=function(){return Object(a.useContext)(c.a)},o=n(297),s=n.n(o),l=n(132),p=n.n(l),m=37,d=39;t.a=function(e){var t=e.block,n=e.children,c=e.defaultValue,o=e.values,l=e.groupId,b=r(),u=b.tabGroupChoices,v=b.setTabGroupChoices,h=Object(a.useState)(c),g=h[0],j=h[1];if(null!=l){var O=u[l];null!=O&&O!==g&&j(O)}var f=function(e){j(e),null!=l&&v(l,e)},S=[];return i.a.createElement("div",null,i.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:s()("tabs",{"tabs--block":t})},o.map((function(e){var t=e.value,n=e.label;return i.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":g===t,className:s()("tab-item",p.a.tabItem,{"tab-item--active":g===t}),key:t,ref:function(e){return S.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case d:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case m:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(S,e.target,e)},onFocus:function(){return f(t)},onClick:function(){return f(t)}},n)}))),i.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter((function(e){return e.props.value===g}))[0]))}}}]);