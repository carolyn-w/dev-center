(window.webpackJsonp=window.webpackJsonp||[]).push([[121,142],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return d})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return m}));var i=n(3),r=(n(0),n(255)),a=n(256),o=n(261),c=n(260),s=n(58);const l={title:"Implement an activity that creates a QR Code image using a Third Party Library",description:"Geocortex Workflow - Implement a custom activity for web applications that creates a QR code image using a third party library"},d={unversionedId:"workflow/tutorial-web-qr-code-activity",id:"workflow/tutorial-web-qr-code-activity",isDocsHomePage:!1,title:"Implement an activity that creates a QR Code image using a Third Party Library",description:"Geocortex Workflow - Implement a custom activity for web applications that creates a QR code image using a third party library",source:"@site/docs/workflow/tutorial-web-qr-code-activity.mdx",slug:"/workflow/tutorial-web-qr-code-activity",permalink:"/docs/workflow/tutorial-web-qr-code-activity",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/workflow/tutorial-web-qr-code-activity.mdx",version:"current",sidebar:"workflow",previous:{title:"Add a Layer to a Map with an Activity",permalink:"/docs/workflow/tutorial-web-add-layer-to-map"},next:{title:"Implement a Star Rating Custom Form Element",permalink:"/docs/workflow/tutorial-web-implement-star-rating-form-element"}},p=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Overview",id:"overview",children:[]},{value:"Adding Dependencies",id:"adding-dependencies",children:[]},{value:"Set up Activity Skeleton",id:"set-up-activity-skeleton",children:[]},{value:"Implement the Activity",id:"implement-the-activity",children:[]},{value:"Deploy the Activity",id:"deploy-the-activity",children:[]},{value:"Test the Activity",id:"test-the-activity",children:[]},{value:"Enhance the Activity",id:"enhance-the-activity",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],u={toc:p};function m({components:e,...t}){return Object(r.b)("wrapper",Object(i.a)({},u,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Implementing a custom ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/workflow/key-concepts#activities"}),"activity")," allows you to build a reusable, completely custom behavior to augment the ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://docs.geocortex.com/workflow/latest/help/Default.htm#wf5/help/activity-reference.htm%3FTocPath%3DActivities%7CActivity%2520Reference%7C_____0"}),"existing activities")," that come with Geocortex Workflow."),Object(r.b)("p",null,"In this article, you will learn how to create a custom activity that generates a QR code image as a data URL using a third party library."),Object(r.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(r.b)(s.default,{mdxType:"WebPrereqs"}),Object(r.b)("h2",{id:"overview"},"Overview"),Object(r.b)("p",null,"Implementing a QR code activity for web applications using a third party library consists of the following steps:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Adding third party library dependencies to your project."),Object(r.b)("li",{parentName:"ol"},"Creating the custom activity."),Object(r.b)("li",{parentName:"ol"},"Implementing the custom activity using the third party library.")),Object(r.b)("h2",{id:"adding-dependencies"},"Adding Dependencies"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Run ",Object(r.b)("inlineCode",{parentName:"li"},"npm install qrcode")," in the terminal to install the third party ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/soldair/node-qrcode"}),"qrcode")," library that generates QR codes."),Object(r.b)("li",{parentName:"ol"},"Run ",Object(r.b)("inlineCode",{parentName:"li"},"npm install @types/qrcode")," in the terminal to install type information for the third party library. This is optional, but it provides an improved developer experience.")),Object(r.b)("h2",{id:"set-up-activity-skeleton"},"Set up Activity Skeleton"),Object(r.b)("p",null,"To create a new activity:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Open the Workflow activity SDK in Visual Studio Code"),Object(r.b)("li",{parentName:"ol"},"Run ",Object(r.b)("inlineCode",{parentName:"li"},"npm run generate")," in the terminal."),Object(r.b)("li",{parentName:"ol"},"When prompted enter the name of the activity you would like to create and press ",Object(r.b)("inlineCode",{parentName:"li"},"Enter"),". For example, ",Object(r.b)("inlineCode",{parentName:"li"},"CreateQrCodeImage"),"."),Object(r.b)("li",{parentName:"ol"},"Open the newly created ",Object(r.b)("inlineCode",{parentName:"li"},"src/activities/CreateQrCodeImage.ts")," file.")),Object(r.b)("h2",{id:"implement-the-activity"},"Implement the Activity"),Object(r.b)("p",null,"Modify the skeleton activity implementation in ",Object(r.b)("inlineCode",{parentName:"p"},"src/activities/CreateQrCodeImage.ts")," to match the following example which provides a minimal QR code implementation."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/activities/CreateQrCodeImage.ts"',title:'"src/activities/CreateQrCodeImage.ts"'}),'import type { IActivityHandler } from "@geocortex/workflow/runtime/IActivityHandler";\nimport QRCode, { QRCodeToDataURLOptions } from "qrcode";\n\n/** An interface that defines the inputs of the activity. */\nexport interface CreateQrCodeImageInputs {\n    /**\n     * @description The text to encode into the QR code.\n     * @required\n     */\n    text: string;\n}\n\n/** An interface that defines the outputs of the activity. */\nexport interface CreateQrCodeImageOutputs {\n    /**\n     * @description The data URL of the resulting the QR code image.\n     */\n    result: string;\n}\n\n/**\n * @displayName Create QR Code Image\n * @category Custom Activities\n * @defaultName qrCode\n * @description Creates a QR code image as a data URL.\n */\nexport class CreateQrCodeImage implements IActivityHandler {\n    async execute(\n        inputs: CreateQrCodeImageInputs\n    ): Promise<CreateQrCodeImageOutputs> {\n        const { text } = inputs;\n\n        // Generate the QR code\n        const dataUrl = await QRCode.toDataURL(text);\n\n        return {\n            result: dataUrl,\n        };\n    }\n}\n')),Object(r.b)("h2",{id:"deploy-the-activity"},"Deploy the Activity"),Object(r.b)("p",null,"Follow the instructions to ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/workflow/sdk-web-overview#deployment"}),"build and deploy the activity pack"),"."),Object(r.b)("h2",{id:"test-the-activity"},"Test the Activity"),Object(r.b)("p",null,"Once your activity pack is hosted and registered, your custom activity should appear in the activity toolbox in Geocortex Workflow Designer alongside the built-in activities, and can be used in the graphical interface like any other activity."),Object(r.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(r.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(r.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(r.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"The ",Object(r.b)("inlineCode",{parentName:"p"},"result")," output of the activity is a data URL. You can use the ",Object(r.b)("strong",{parentName:"p"},"Set Form Element Property")," activity to assign the URL to the ",Object(r.b)("inlineCode",{parentName:"p"},"value")," property of an ",Object(r.b)("strong",{parentName:"p"},"Image")," form element."))),Object(r.b)("p",null,"Now you can build a workflow that uses your new custom activity!"),Object(r.b)("h2",{id:"enhance-the-activity"},"Enhance the Activity"),Object(r.b)("p",null,"Once you've seen your activity in action you may want to take advantage of the many different options offered by the ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/soldair/node-qrcode"}),"qrcode")," library. To do this you can add additional inputs to the activity that correspond to options on the ",Object(r.b)("inlineCode",{parentName:"p"},"QRCode.toDataURL(text: string, options?: QRCodeToDataURLOptions)")," method."),Object(r.b)("p",null,"Modify the previous activity implementation in ",Object(r.b)("inlineCode",{parentName:"p"},"src/activities/CreateQrCodeImage.ts")," to match the following more complete example."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/activities/CreateQrCodeImage.ts"',title:'"src/activities/CreateQrCodeImage.ts"'}),'import type { IActivityHandler } from "@geocortex/workflow/runtime/IActivityHandler";\nimport QRCode, { QRCodeToDataURLOptions } from "qrcode";\n\n/** An interface that defines the inputs of the activity. */\nexport interface CreateQrCodeImageInputs {\n    /**\n     * @description The text or data to encode into the QR code.\n     * @required\n     */\n    text:\n        | string\n        | {\n              data: string;\n              mode: "alphanumeric" | "numeric" | "kanji" | "byte";\n          }[];\n\n    /**\n     * @description The RGBA color of the dark module. The default is #000000ff (black).\n     */\n    darkColor?: string;\n\n    /**\n     * @description Error correction level. The default is medium.\n     */\n    errorCorrectionLevel?: "low" | "medium" | "quartile" | "high";\n\n    /**\n     * @description The RGBA color of the light module. The default is #ffffffff (white).\n     */\n    lightColor?: string;\n\n    /**\n     * @description The size of the quiet zone around the QR code. The default is 4.\n     */\n    margin?: number;\n\n    /**\n     * @description A Number between 0 and 1 indicating image quality if the requested type is image/jpeg or image/webp. The default is 0.92.\n     */\n    quality?: number;\n\n    /**\n     * @description The Scale factor. A value of 1 means 1px per modules (black dots). The default is 4.\n     */\n    scale?: number;\n\n    /**\n     * @description The image format. The default is image/png.\n     */\n    type?: "image/png" | "image/jpeg" | "image/webp";\n\n    /**\n     * @description The width of the output image. If the width is too small to contain the QR code, this option will be ignored. This input takes precedence over the scale input.\n     */\n    width?: number;\n\n    /**\n     * @description The QR Code version. A number between 1 and 40. If not specified, a suitable value will be calculated.\n     */\n    version?: number;\n}\n\n/** An interface that defines the outputs of the activity. */\nexport interface CreateQrCodeImageOutputs {\n    /**\n     * @description The data URL of the resulting the QR code image.\n     */\n    result: string;\n}\n\n/**\n * @displayName Create QR Code Image\n * @category Custom Activities\n * @defaultName qrCode\n * @description Creates a QR code image as a data URL.\n */\nexport class CreateQrCodeImage implements IActivityHandler {\n    async execute(\n        inputs: CreateQrCodeImageInputs\n    ): Promise<CreateQrCodeImageOutputs> {\n        const {\n            darkColor,\n            lightColor,\n            quality,\n            text,\n            ...other\n        } = inputs;\n\n        // Assemble the QR code options from the activity inputs\n        const options: QRCodeToDataURLOptions = {\n            ...other,\n            color: {\n                dark: darkColor,\n                light: lightColor,\n            },\n            rendererOpts: {\n                quality,\n            },\n        };\n\n        // Generate the QR code\n        const dataUrl = await QRCode.toDataURL(text, options);\n\n        return {\n            result: dataUrl,\n        };\n    }\n}\n')),Object(r.b)("h2",{id:"next-steps"},"Next Steps"),Object(r.b)(c.a,{mdxType:"UseCaseContainer"},Object(r.b)(o.a,{title:"Learn how to create a QR Code form element",description:"Learn how to to use this same third party library to create a form element that generates and displays QR codes",link:Object(a.a)("docs/workflow/tutorial-web-implement-third-party-qr-code-form-element"),mdxType:"UseCaseCard"})))}m.isMDXComponent=!0},255:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),d=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=d(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=d(n),m=i,b=p["".concat(o,".").concat(m)]||p[m]||u[m]||a;return n?r.a.createElement(b,c(c({ref:t},l),{},{components:n})):r.a.createElement(b,c({ref:t},l))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var l=2;l<a;l++)o[l]=n[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},256:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n(21),r=n(257);function a(){const{siteConfig:{baseUrl:e="/",url:t}={}}=Object(i.default)();return{withBaseUrl:(n,i)=>function(e,t,n,{forcePrependBaseUrl:i=!1,absolute:a=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(i)return t+n;const o=n.startsWith(t)?n:t+n.replace(/^\//,"");return a?e+o:o}(t,e,n,i)}}function o(e,t={}){const{withBaseUrl:n}=a();return n(e,t)}},257:function(e,t,n){"use strict";function i(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!i(e)}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}))},258:function(e,t,n){"use strict";function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}},259:function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(11),o=n(257),c=n(9);const s=Object(i.createContext)({collectLink:()=>{}});var l=n(256),d=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};t.a=function(e){var t,{isNavLink:n,to:p,href:u,activeClassName:m,isActive:b,"data-noBrokenLinkCheck":h,autoAddBaseUrl:f=!0}=e,v=d(e,["isNavLink","to","href","activeClassName","isActive","data-noBrokenLinkCheck","autoAddBaseUrl"]);const{withBaseUrl:y}=Object(l.b)(),g=Object(i.useContext)(s),w=p||u,O=Object(o.a)(w),j=null==w?void 0:w.replace("pathname://",""),C=void 0!==j?(N=j,f&&(e=>e.startsWith("/"))(N)?y(N):N):void 0;var N;const k=Object(i.useRef)(!1),x=n?a.e:a.c,R=c.a.canUseIntersectionObserver;let I;Object(i.useEffect)((()=>(!R&&O&&window.docusaurus.prefetch(C),()=>{R&&I&&I.disconnect()})),[C,R,O]);const Q=null!==(t=null==C?void 0:C.startsWith("#"))&&void 0!==t&&t,A=!C||!O||Q;return C&&O&&!Q&&!h&&g.collectLink(C),A?r.a.createElement("a",Object.assign({href:C},w&&!O&&{target:"_blank",rel:"noopener noreferrer"},v)):r.a.createElement(x,Object.assign({},v,{onMouseEnter:()=>{k.current||(window.docusaurus.preload(C),k.current=!0)},innerRef:e=>{var t,n;R&&e&&O&&(t=e,n=()=>{window.docusaurus.prefetch(C)},I=new window.IntersectionObserver((e=>{e.forEach((e=>{t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(I.unobserve(t),I.disconnect(),n())}))})),I.observe(t))},to:C||""},n&&{isActive:b,activeClassName:m}))}},260:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(0),r=n.n(i),a=n(54),o=n.n(a);function c({children:e}){return r.a.createElement("div",{className:o.a.root},e)}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(259),r=n(0),a=n.n(r),o=n(258),c=n(55),s=n.n(c);function l({title:e,description:t,link:n}){return a.a.createElement("div",{className:Object(o.a)("card-demo",s.a.root)},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card__header"},a.a.createElement("h3",null,e)),a.a.createElement("div",{className:"card__body"},a.a.createElement("p",null,t)),a.a.createElement("div",{className:"card__footer"},a.a.createElement(i.a,{className:"button button--secondary button--block",to:n},"Get Started"))))}},58:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return l}));var i=n(3),r=(n(0),n(255));const a={},o={unversionedId:"workflow/snippets/prereqs-web",id:"workflow/snippets/prereqs-web",isDocsHomePage:!1,title:"prereqs-web",description:"Follow the instructions in the Web Applications SDK page to set up your development environment.",source:"@site/docs/workflow/snippets/prereqs-web.mdx",slug:"/workflow/snippets/prereqs-web",permalink:"/docs/workflow/snippets/prereqs-web",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/workflow/snippets/prereqs-web.mdx",version:"current"},c=[],s={toc:c};function l({components:e,...t}){return Object(r.b)("wrapper",Object(i.a)({},s,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Follow the instructions in the ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/workflow/sdk-web-overview"}),"Web Applications SDK")," page to set up your development environment."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"A working knowledge of ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://www.typescriptlang.org/"}),"TypeScript")," is recommended before extending Workflow for web-based hosts."))))}l.isMDXComponent=!0}}]);