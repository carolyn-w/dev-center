(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{196:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return m})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return f}));var o=n(2),r=n(6),a=(n(0),n(222)),c=n(223),i=n(232),l=n(233),s=n(229),p=n(228),m={title:"Create a Component",description:"Geocortex Web - Create a component for Geocortex Web"},u={unversionedId:"web/sdk-components-create",id:"web/sdk-components-create",isDocsHomePage:!1,title:"Create a Component",description:"Geocortex Web - Create a component for Geocortex Web",source:"@site/docs/web/sdk-components-create.mdx",permalink:"/docs/web/sdk-components-create",editUrl:"https://github.com/geocortex/dev-center/edit/master/docs/web/sdk-components-create.mdx",sidebar:"web",previous:{title:"Components Overview",permalink:"/docs/web/sdk-components-overview"},next:{title:"Component Reference",permalink:"/docs/web/sdk-components-reference"}},d=[{value:"Create the Component",id:"create-the-component",children:[]},{value:"Create the Component Model",id:"create-the-component-model",children:[]},{value:"Register the Component",id:"register-the-component",children:[]},{value:"Add the Component to your Layout",id:"add-the-component-to-your-layout",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],b={rightToc:d};function f(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"The ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/web/sdk-overview"}),"Geocortex Web SDK")," project template includes an example of a ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/web/sdk-components-create"}),"custom component")," following our best practices. Creating a new custom component involves a few important steps:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"#create-the-component"}),"Create the component source file")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"#create-the-component-model"}),"Create the component model")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"#register-the-component"}),"Register the component and component model in your library registration file"))),Object(a.b)("h2",{id:"create-the-component"},"Create the Component"),Object(a.b)("p",null,"Create the component source file in a new folder within the ",Object(a.b)("inlineCode",{parentName:"p"},"src/components")," folder. For example to create a new component called ",Object(a.b)("inlineCode",{parentName:"p"},"ExampleComponent"),", create a new file called ",Object(a.b)("inlineCode",{parentName:"p"},"ExampleComponent.tsx")," in ",Object(a.b)("inlineCode",{parentName:"p"},"src/components/ExampleComponent")," with the following content:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/components/ExampleComponent/ExampleComponent.tsx"',title:'"src/components/ExampleComponent/ExampleComponent.tsx"'}),'import {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport React from "react";\n\n// We will create this model in the next step.\nimport ExampleComponentModel from "./ExampleComponentModel";\n\nconst ExampleComponent = (\n    props: LayoutElementProperties<ExampleComponentModel>\n) => {\n    const { model } = props;\n\n    return (\n        <LayoutElement {...props}>\n            <p>{model.exampleValue}</p>\n        </LayoutElement>\n    );\n};\n\nexport default ExampleComponent;\n')),Object(a.b)("h2",{id:"create-the-component-model"},"Create the Component Model"),Object(a.b)("p",null,"Next we need to create the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/web/sdk-components-reference#models"}),"component model")," that will be bound to the component we just created. This model will function as the underlying data source for the component."),Object(a.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(a.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(o.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(o.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(o.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(a.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"It's best practice to use the model to define configurable or persistent state, and use the React state hooks for UI specific transient state, like an active selection."))),Object(a.b)("p",null,"Create a new file called ",Object(a.b)("inlineCode",{parentName:"p"},"ExampleComponentModel.ts")," in ",Object(a.b)("inlineCode",{parentName:"p"},"src/components/ExampleComponent"),":"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/components/ExampleComponent/ExampleComponentModel.ts"',title:'"src/components/ExampleComponent/ExampleComponentModel.ts"'}),'import {\n    ComponentModelBase,\n    ComponentModelProperties,\n    serializable,\n    PropertyDefs,\n} from "@vertigis/web/models";\n\ninterface ExampleComponentModelProperties extends ComponentModelProperties {\n    exampleValue?: string;\n}\n\n// The serializable decorator marks this class as being serializable\n// so it can be serialized to/from the app.json configuration of\n// your app.\n@serializable\nexport default class ExampleComponentModel extends ComponentModelBase<\n    ExampleComponentModelProperties\n> {\n    exampleValue: string;\n\n    // This method defines how the model will be serialized and deserialized into\n    // an app item. We override it to include our new property `exampleValue`.\n    protected _getSerializableProperties(): PropertyDefs<\n        ExampleComponentModelProperties\n    > {\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            exampleValue: {\n                serializeModes: ["initial"],\n                default: "Default Value",\n            },\n        };\n    }\n}\n')),Object(a.b)("h2",{id:"register-the-component"},"Register the Component"),Object(a.b)("p",null,"Finally we need to register the component and component model with the Geocortex Web component registry so that it is aware of your new component."),Object(a.b)("p",null,"To simplify the module imports, we'll make a new file in the ",Object(a.b)("inlineCode",{parentName:"p"},"ExampleComponent")," folder called ",Object(a.b)("inlineCode",{parentName:"p"},"index.ts"),". Note that this file is for convenience, and is not required:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/components/ExampleComponent/index.ts"',title:'"src/components/ExampleComponent/index.ts"'}),'export { default } from "./ExampleComponent";\nexport { default as ExampleComponentModel } from "./ExampleComponentModel";\n')),Object(a.b)("p",null,"Now register your component and component model with the component registry by modifying the ",Object(a.b)("inlineCode",{parentName:"p"},"src/index.ts")," file:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'}),'import { LibraryRegistry } from "@vertigis/web/config";\n\n// highlight-start\nimport ExampleComponent, {\n    ExampleComponentModel,\n} from "./components/ExampleComponent";\n// highlight-end\n\n// This namespace is generated when you create your project\n// and will be unique to your library.\nconst LAYOUT_NAMESPACE = "custom.abc123";\n\nexport default function (registry: LibraryRegistry) {\n    // ... other item registrations\n\n    // highlight-start\n    registry.registerComponent({\n        name: "example",\n        namespace: LAYOUT_NAMESPACE,\n        getComponentType: () => ExampleComponent,\n        itemType: "example-model",\n        title: "Example Component",\n    });\n    registry.registerModel({\n        getModel: (config) => new ExampleComponentModel(config),\n        itemType: "example-model",\n    });\n    // highlight-end\n}\n')),Object(a.b)("h2",{id:"add-the-component-to-your-layout"},"Add the Component to your Layout"),Object(a.b)("p",null,"You can now add the component to your ",Object(a.b)("inlineCode",{parentName:"p"},"layout.xml")," file and run the development server to see it in use."),Object(a.b)(i.a,{defaultValue:"layout",values:[{label:"Layout",value:"layout"},{label:"UI",value:"ui"}],mdxType:"Tabs"},Object(a.b)(l.a,{value:"layout",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'}),'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="custom.abc123">\n    <custom:example margin="3"/>\n</layout>\n'))),Object(a.b)(l.a,{value:"ui",mdxType:"TabItem"},Object(a.b)("img",{src:Object(c.a)("img/web-sdk-components-create.png")}))),Object(a.b)("h2",{id:"next-steps"},"Next Steps"),Object(a.b)(p.a,{mdxType:"UseCaseContainer"},Object(a.b)(s.a,{title:"Check out the Component Reference",description:"Take a deep dive into components in the Geocortex Web SDK",link:Object(c.a)("docs/web/sdk-components-reference"),mdxType:"UseCaseCard"}),Object(a.b)(s.a,{title:"Deploy your Component",description:"Learn how to deploy your custom component.",link:Object(c.a)("docs/web/sdk-deployment"),mdxType:"UseCaseCard"}),Object(a.b)(s.a,{title:"Create a Component with a Complex UI",description:"Follow along with a more in depth component example",link:Object(c.a)("docs/web/tutorial-implement-component-with-ui"),mdxType:"UseCaseCard"}),Object(a.b)(s.a,{title:"Create a Component that Consumes App Config",description:"Learn more about writing components that consume configuration values.",link:Object(c.a)("docs/web/tutorial-implement-component-participate-app-config"),mdxType:"UseCaseCard"})))}f.isMDXComponent=!0},222:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=o,b=m["".concat(c,".").concat(d)]||m[d]||u[d]||a;return n?r.a.createElement(b,i(i({ref:t},s),{},{components:n})):r.a.createElement(b,i({ref:t},s))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var s=2;s<a;s++)c[s]=n[s];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},223:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var o=n(226),r=n(224);function a(){var e=Object(o.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,o){var a=void 0===o?{}:o,c=a.forcePrependBaseUrl,i=void 0!==c&&c,l=a.absolute,s=void 0!==l&&l;if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(i)return t+n;var p=!n.startsWith(t)?t+n.replace(/^\//,""):n;return s?e+p:p}(a,n,e,t)}}}function c(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},224:function(e,t,n){"use strict";function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!o(e)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}))},225:function(e,t,n){"use strict";function o(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(r&&(r+=" "),r+=t);return r}},226:function(e,t,n){"use strict";var o=n(0),r=n(18);t.a=function(){var e=Object(o.useContext)(r.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},227:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(13),c=n(224),i=n(8),l=Object(o.createContext)({collectLink:function(){}}),s=n(223),p=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};t.a=function(e){var t,n,m=e.isNavLink,u=e.to,d=e.href,b=e.activeClassName,f=e["data-noBrokenLinkCheck"],h=p(e,["isNavLink","to","href","activeClassName","data-noBrokenLinkCheck"]),O=Object(s.b)().withBaseUrl,v=Object(o.useContext)(l),j=u||d,y=void 0!==j?O(j):void 0,C=Object(c.a)(y),g=Object(o.useRef)(!1),x=m?a.e:a.c,w=i.a.canUseIntersectionObserver;Object(o.useEffect)((function(){return!w&&C&&window.docusaurus.prefetch(y),function(){w&&n&&n.disconnect()}}),[y,w,C]);var E=null!==(t=null==y?void 0:y.startsWith("#"))&&void 0!==t&&t,N=!y||!C||E;return y&&C&&!E&&!f&&v.collectLink(y),N?r.a.createElement("a",Object.assign({href:y},!C&&{target:"_blank",rel:"noopener noreferrer"},h)):r.a.createElement(x,Object.assign({},h,{onMouseEnter:function(){g.current||(window.docusaurus.preload(y),g.current=!0)},innerRef:function(e){var t,o;w&&e&&C&&(t=e,o=function(){window.docusaurus.prefetch(y)},(n=new window.IntersectionObserver((function(e){e.forEach((function(e){t===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(n.unobserve(t),n.disconnect(),o())}))}))).observe(t))},to:y},m&&{activeClassName:b}))}},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(0),r=n.n(o),a=n(46),c=n.n(a);function i(e){var t=e.children;return r.a.createElement("div",{className:c.a.root},t)}},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n(227),r=n(0),a=n.n(r),c=n(225),i=n(47),l=n.n(i);function s(e){var t=e.title,n=e.description,r=e.link;return a.a.createElement("div",{className:Object(c.a)("card-demo",l.a.root)},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card__header"},a.a.createElement("h3",null,t)),a.a.createElement("div",{className:"card__body"},a.a.createElement("p",null,n)),a.a.createElement("div",{className:"card__footer"},a.a.createElement(o.a,{className:"button button--secondary button--block",to:r},"Get Started"))))}},230:function(e,t,n){"use strict";var o=n(0),r=Object(o.createContext)(void 0);t.a=r},231:function(e,t,n){"use strict";var o=n(0),r=n(230);t.a=function(){var e=Object(o.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},232:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(231),c=n(225),i=n(48),l=n.n(i),s=37,p=39;t.a=function(e){var t=e.block,n=e.children,i=e.defaultValue,m=e.values,u=e.groupId,d=Object(a.a)(),b=d.tabGroupChoices,f=d.setTabGroupChoices,h=Object(o.useState)(i),O=h[0],v=h[1];if(null!=u){var j=b[u];null!=j&&j!==O&&m.some((function(e){return e.value===j}))&&v(j)}var y=function(e){v(e),null!=u&&f(u,e)},C=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":t})},m.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":O===t,className:Object(c.a)("tabs__item",l.a.tabItem,{"tabs__item--active":O===t}),key:t,ref:function(e){return C.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case p:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case s:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(C,e.target,e)},onFocus:function(){return y(t)},onClick:function(){return y(t)}},n)}))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},o.Children.toArray(n).filter((function(e){return e.props.value===O}))[0]))}},233:function(e,t,n){"use strict";var o=n(0),r=n.n(o);t.a=function(e){return r.a.createElement("div",null,e.children)}}}]);